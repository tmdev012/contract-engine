<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="ce1" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#1565c0"/><stop offset="100%" style="stop-color:#1976d2"/></linearGradient>
    <linearGradient id="ce2" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#6a1b9a"/><stop offset="100%" style="stop-color:#9c27b0"/></linearGradient>
    <linearGradient id="ce3" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#e65100"/><stop offset="100%" style="stop-color:#f57c00"/></linearGradient>
    <linearGradient id="ce4" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#2e7d32"/><stop offset="100%" style="stop-color:#43a047"/></linearGradient>
    <linearGradient id="ce5" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#c62828"/><stop offset="100%" style="stop-color:#e53935"/></linearGradient>
    <filter id="s"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.15"/></filter>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0,10 3.5,0 7" fill="#555"/></marker>
  </defs>
  <style>
    @keyframes flow{0%{stroke-dashoffset:20}100%{stroke-dashoffset:0}}
    @keyframes fadeIn{0%{opacity:0;transform:scale(0.9)}100%{opacity:1;transform:scale(1)}}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .flow{stroke-dasharray:10 10;animation:flow 1s linear infinite}
    .s1{animation:fadeIn 0.4s ease 0.1s both}.s2{animation:fadeIn 0.4s ease 0.3s both}
    .s3{animation:fadeIn 0.4s ease 0.5s both}.s4{animation:fadeIn 0.4s ease 0.7s both}
    .s5{animation:fadeIn 0.4s ease 0.9s both}.pump{animation:pulse 3s ease infinite}
  </style>
  <text x="450" y="30" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#333">Contract Engine â€” Document Generation Pipeline</text>
  <!-- Stage 1: Template -->
  <g class="s1"><rect x="20" y="140" width="140" height="80" rx="10" fill="url(#ce1)" filter="url(#s)"/><text x="90" y="175" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">Template</text><text x="90" y="195" text-anchor="middle" font-family="Arial" font-size="10" fill="#bbdefb">Jinja2 + Markdown</text></g>
  <!-- Stage 2: Variables -->
  <g class="s2"><rect x="200" y="140" width="140" height="80" rx="10" fill="url(#ce2)" filter="url(#s)"/><text x="270" y="175" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">Variables</text><text x="270" y="195" text-anchor="middle" font-family="Arial" font-size="10" fill="#e1bee7">Client Data Inject</text></g>
  <!-- Stage 3: AI Enhance -->
  <g class="s3 pump"><rect x="380" y="140" width="140" height="80" rx="10" fill="url(#ce3)" filter="url(#s)"/><text x="450" y="175" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">AI Enhance</text><text x="450" y="195" text-anchor="middle" font-family="Arial" font-size="10" fill="#ffe0b2">Ollama Clauses</text></g>
  <!-- Stage 4: Anonymize -->
  <g class="s4"><rect x="560" y="140" width="140" height="80" rx="10" fill="url(#ce5)" filter="url(#s)"/><text x="630" y="175" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">Anonymize</text><text x="630" y="195" text-anchor="middle" font-family="Arial" font-size="10" fill="#ffcdd2">PII Redaction</text></g>
  <!-- Stage 5: PDF -->
  <g class="s5"><rect x="740" y="140" width="140" height="80" rx="10" fill="url(#ce4)" filter="url(#s)"/><text x="810" y="175" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">PDF Export</text><text x="810" y="195" text-anchor="middle" font-family="Arial" font-size="10" fill="#c8e6c9">WeasyPrint</text></g>
  <!-- Arrows -->
  <line x1="160" y1="180" x2="195" y2="180" stroke="#555" stroke-width="2" class="flow" marker-end="url(#arr)"/>
  <line x1="340" y1="180" x2="375" y2="180" stroke="#555" stroke-width="2" class="flow" marker-end="url(#arr)"/>
  <line x1="520" y1="180" x2="555" y2="180" stroke="#555" stroke-width="2" class="flow" marker-end="url(#arr)"/>
  <line x1="700" y1="180" x2="735" y2="180" stroke="#555" stroke-width="2" class="flow" marker-end="url(#arr)"/>
  <!-- Step numbers -->
  <circle cx="90" cy="120" r="14" fill="#1565c0"/><text x="90" y="125" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">1</text>
  <circle cx="270" cy="120" r="14" fill="#6a1b9a"/><text x="270" y="125" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">2</text>
  <circle cx="450" cy="120" r="14" fill="#e65100"/><text x="450" y="125" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">3</text>
  <circle cx="630" cy="120" r="14" fill="#c62828"/><text x="630" y="125" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">4</text>
  <circle cx="810" cy="120" r="14" fill="#2e7d32"/><text x="810" y="125" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">5</text>
  <!-- Concurrent docs -->
  <g class="s5"><rect x="20" y="280" width="860" height="70" rx="8" fill="#fafafa" stroke="#e0e0e0"/>
  <text x="450" y="305" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#333">Concurrent Document Types</text>
  <text x="120" y="335" text-anchor="middle" font-family="monospace" font-size="11" fill="#1565c0">NDA</text>
  <text x="280" y="335" text-anchor="middle" font-family="monospace" font-size="11" fill="#6a1b9a">Invoice</text>
  <text x="450" y="335" text-anchor="middle" font-family="monospace" font-size="11" fill="#e65100">SLA</text>
  <text x="620" y="335" text-anchor="middle" font-family="monospace" font-size="11" fill="#c62828">Proposal</text>
  <text x="780" y="335" text-anchor="middle" font-family="monospace" font-size="11" fill="#2e7d32">Contract</text></g>
</svg>
